# шинхоЪуГХуВбуВдуГл (pipeline_config.conf) уБоф╜┐чФицЦ╣ц│Х

## цжВшжБ

`get_pipelines.sh` уБи `get_accounts.sh` уБзуБпуАБBashхдЙцХ░х╜вх╝ПуБошинхоЪуГХуВбуВдуГл `pipeline_config.conf` уВТф╜┐чФиуБЧуБжуГЗуГХуВйуГлуГИшинхоЪуВТчобчРЖуБзуБНуБ╛уБЩуАВ

## шинхоЪуГХуВбуВдуГлуБоф╜ЬцИР

```bash
# ф╛ЛуГХуВбуВдуГлуВТуВ│уГФуГ╝уБЧуБжшинхоЪуГХуВбуВдуГлуВТф╜ЬцИР
cp pipeline_config.example.conf pipeline_config.conf

# шинхоЪуГХуВбуВдуГлуВТч╖ищЫЖ
vi pipeline_config.conf
```

## шинхоЪщаЕчЫо

### AWSшинхоЪ
- `AWS_DEFAULT_PROFILE`: уГЗуГХуВйуГлуГИуБоAWSуГЧуГнуГХуВбуВдуГлхРН
- `AWS_REGION`: AWSуГкуГ╝уВ╕уГзуГ│
- `AWS_PIPELINES_PROFILE`: get_pipelines.sh уБзф╜┐чФиуБЩуВЛAWSуГЧуГнуГХуВбуВдуГл
- `AWS_ACCOUNTS_PROFILE`: get_accounts.sh уБзф╜┐чФиуБЩуВЛAWSуГЧуГнуГХуВбуВдуГл

### уВнуГгуГГуВ╖уГешинхоЪ
- `CACHE_TTL`: уВнуГгуГГуВ╖уГецЬЙхК╣цЬЯщЩРя╝ИчзТя╝Й
- `CACHE_ENABLED`: уВнуГгуГГуВ╖уГеуВТцЬЙхК╣уБлуБЩуВЛуБЛ (true/false)

### шбичд║шинхоЪ
- `DISPLAY_FORMAT`: хЗ║хКЫх╜вх╝П (table|json|csv)
- `DISPLAY_QUIET`: щЭЩхпВуГвуГ╝уГЙ (true/false)
- `DISPLAY_PROGRESS_INTERVAL`: уГЧуГнуВ░уГмуВ╣шбичд║щЦУщЪФ

### уГСуГХуВйуГ╝уГЮуГ│уВ╣шинхоЪ
- `PERFORMANCE_MAX_PARALLEL`: ф╕жхИЧхЗжчРЖцХ░

### уГХуВгуГлуВ┐уГкуГ│уВ░шинхоЪ
- `PIPELINES_DEFAULT_QUERY`: уГЗуГХуВйуГлуГИуБоJMESPathуВпуВиуГкуГХуВгуГлуВ┐уГ╝
- `PIPELINES_DEFAULT_STATUS`: уГЗуГХуВйуГлуГИуБоуВ╣уГЖуГ╝уВ┐уВ╣уГХуВгуГлуВ┐уГ╝ (ALL|Succeeded|Failed|InProgress|Stopped)

## шинхоЪф╛Л

### уГЮуГлуГБуВвуВлуВжуГ│уГИчТ░хвГуБзуБошинхоЪ

```bash
# AWSшинхоЪ
AWS_DEFAULT_PROFILE="default"
AWS_REGION="us-east-1"
AWS_PIPELINES_PROFILE="production-pipeline-account"
AWS_ACCOUNTS_PROFILE="organizations-management-account"

# уВнуГгуГГуВ╖уГешинхоЪ
CACHE_TTL=3600  # 1цЩВщЦУуВнуГгуГГуВ╖уГе

# уГСуГХуВйуГ╝уГЮуГ│уВ╣шинхоЪ
PERFORMANCE_MAX_PARALLEL=20  # ф╕жхИЧхЗжчРЖцХ░уВТхвЧхКа

# уГХуВгуГлуВ┐уГкуГ│уВ░шинхоЪ
PIPELINES_DEFAULT_QUERY='pipelines[?ends_with(name, `customizations-pipeline`)]'  # customizationsуГСуВдуГЧуГйуВдуГ│уБоуБ┐
PIPELINES_DEFAULT_STATUS="ALL"  # хЕиуВ╣уГЖуГ╝уВ┐уВ╣
```

### щЦЛчЩ║чТ░хвГчФишинхоЪ

```bash
# AWSшинхоЪ
AWS_DEFAULT_PROFILE="dev-profile"
AWS_REGION="ap-northeast-1"
AWS_PIPELINES_PROFILE="dev-pipeline-account"
AWS_ACCOUNTS_PROFILE="dev-organizations-account"

# уВнуГгуГГуВ╖уГешинхоЪ
CACHE_TTL=600  # 10хИЖуВнуГгуГГуВ╖уГея╝Ища╗ч╣БуБлхдЙцЫ┤уБХуВМуВЛчТ░хвГя╝Й

# шбичд║шинхоЪ
DISPLAY_QUIET=true  # уГЧуГнуВ░уГмуВ╣шбичд║уБкуБЧ

# уГСуГХуВйуГ╝уГЮуГ│уВ╣шинхоЪ
PERFORMANCE_MAX_PARALLEL=10  # цОзуБИуВБуБкф╕жхИЧхЗжчРЖ
```

## BashхдЙцХ░х╜вх╝ПуБохИйчВ╣

1. **уГНуВдуГЖуВгуГЦуВ╡уГЭуГ╝уГИ**: BashуБо`source`уВ│уГЮуГ│уГЙуБзчЫ┤цОешкнуБ┐ш╛╝уВБуВЛ
2. **щлШщАЯ**: уГСуГ╝уВ╣хЗжчРЖуБМф╕НшжБуБзчЮмцЩВуБлшкнуБ┐ш╛╝уБ┐
3. **уВ╖уГ│уГЧуГл**: ш┐╜хКауБоф╛ЭхнШщЦвф┐ВуВДуГДуГ╝уГлуБМф╕НшжБ
4. **уГЗуГРуГГуВ░уБЧуВДуБЩуБД**: хдЙцХ░уБохАдуВТчЫ┤цОечв║шкНуБзуБНуВЛ
5. **чТ░хвГхдЙцХ░уБиуБошжкхТМцАз**: цЧвхнШуБочТ░хвГхдЙцХ░уБич╡▒хРИуБЧуВДуБЩуБД

## хДкхЕИщаЖф╜Н

шинхоЪуБохДкхЕИщаЖф╜НуБпф╗еф╕ЛуБощАЪуВКуБзуБЩя╝Ъ

1. уВ│уГЮуГ│уГЙуГйуВдуГ│х╝ХцХ░я╝ИцЬАхДкхЕИя╝Й
2. шинхоЪуГХуВбуВдуГля╝Иpipeline_config.confя╝Й
3. уГЗуГХуВйуГлуГИхАд

ф╛Ля╝Ъ
```bash
# шинхоЪуГХуВбуВдуГлуБзDISPLAY_FORMAT="json"уБзуВВуАБуВ│уГЮуГ│уГЙуГйуВдуГ│х╝ХцХ░уБМхДкхЕИуБХуВМуВЛ
./get_pipelines.sh -f table
```

## шинхоЪуГХуВбуВдуГлуБочв║шкН

шинхоЪуГХуВбуВдуГлуБМцнгуБЧуБПшкнуБ┐ш╛╝уБ╛уВМуБжуБДуВЛуБЛуБпуАБф╗еф╕ЛуБзчв║шкНуБзуБНуБ╛уБЩя╝Ъ

```bash
# уГЖуВ╣уГИуВ╣уВпуГкуГЧуГИуБзшинхоЪхАдуВТчв║шкН
./test_config.sh

# шинхоЪуГХуВбуВдуГлуБохЖЕхо╣уВТчЫ┤цОечв║шкН
cat pipeline_config.conf
```

## чТ░хвГхдЙцХ░уБиуБоч╡ДуБ┐хРИуВПуБЫ

шинхоЪуГХуВбуВдуГлуБичТ░хвГхдЙцХ░уВТч╡ДуБ┐хРИуВПуБЫуВЛуБУуБиуВВхПпшГ╜уБзуБЩя╝Ъ

```bash
# ф╕АцЩВчЪДуБлчХ░уБкуВЛуГЧуГнуГХуВбуВдуГлуВТф╜┐чФи
AWS_PIPELINES_PROFILE="temporary-profile" ./get_pipelines.sh

# чТ░хвГхдЙцХ░уБзшинхоЪуВТф╕КцЫ╕уБН
export AWS_PIPELINES_PROFILE="my-profile"
./get_pipelines.sh
```

## уГИуГйуГЦуГлуВ╖уГеуГ╝уГЖуВгуГ│уВ░

### шинхоЪуГХуВбуВдуГлуБМшжЛуБдуБЛуВЙуБкуБДха┤хРИ
```
тЪая╕П  шинхоЪуГХуВбуВдуГлуБМшжЛуБдуБЛуВКуБ╛уБЫуВУ: pipeline_config.conf
ЁЯТб уГЗуГХуВйуГлуГИшинхоЪуВТф╜┐чФиуБЧуБ╛уБЩуАВшинхоЪуГХуВбуВдуГлуВТф╜ЬцИРуБЩуВЛха┤хРИ:
   cp pipeline_config.example.conf pipeline_config.conf
```

### шинхоЪуГХуВбуВдуГлуБоцзЛцЦЗуВиуГйуГ╝
```bash
# шинхоЪуГХуВбуВдуГлуБоцзЛцЦЗуВТуГБуВзуГГуВп
bash -n pipeline_config.conf
```

### AWSуГЧуГнуГХуВбуВдуГлуБМшжЛуБдуБЛуВЙуБкуБДха┤хРИ
```bash
# хИйчФихПпшГ╜уБкуГЧуГнуГХуВбуВдуГлуВТчв║шкН
aws configure list-profiles

# уГЧуГнуГХуВбуВдуГлуВТшинхоЪ
aws configure --profile your-profile-name
```

## уВ╗уВнуГеуГкуГЖуВгц│ицДПф║ЛщаЕ

- шинхоЪуГХуВбуВдуГлуБлуБпцйЯхпЖцГЕха▒я╝ИуВвуВпуВ╗уВ╣уВнуГ╝уБкуБйя╝ЙуВТчЫ┤цОешиШш╝ЙуБЧуБкуБДуБзуБПуБауБХуБД
- AWSуГЧуГнуГХуВбуВдуГлхРНуБоуБ┐уВТшиШш╝ЙуБЧуАБшкНши╝цГЕха▒уБп`~/.aws/credentials`уБзчобчРЖуБЧуБжуБПуБауБХуБД
- шинхоЪуГХуВбуВдуГлуБоцийщЩРуВТщБйхИЗуБлшинхоЪуБЧуБжуБПуБауБХуБДя╝И`chmod 600 pipeline_config.conf`я╝Й